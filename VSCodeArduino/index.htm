<html>
<head>
<link rel='stylesheet' type='text/css' href='../my.css'>

<title>VSCode</title>
</head>

<body>
<div align=center>
<table class="my_table"><tr><td> 
<font size=-1><i><a href="../">back</a></i></font>

<p>Want to program <a href=../USB/index.htm#BlackPill>STM32 Black Pill</a> as a USB MIDI device.
<br>Cannot launch <a href=../Arduino2/index.htm>Arduino 2</a> without unnatural acts
<br> &emsp; <a href=../Arduino2/install.htm#oopsie>bogus incompatibility with ImDisk</a>...
</p>

<h3>VSCode</h3>

<details><summary>rant</summary>
<a name=rant><pre></a>
Visual Studio Code describes itself as a "standalone source code editor",
NOT an IDE, which it is indeed NOT, since more mashup than integrated.

<b>Task-oriented vs event-driven</b>
Users presumably employ VSCode to accomplish tasks.
Event-driven user interfaces can make that nearly impossible.
- some VSCode menus are empty until some other menu items are completed...

Configuring VSCode <i>should be</i> a rare event...
- Given that rarity, configuration should be easily accomplished and well explained.
- At least for <a href=../VSCodeArduino/index.htm>VSCode-Arduino</a>, configuration is hardly explained
	and unclear whether actually accomplished.

This is my first Visual Studio Code experience.
I <a href=https://code.visualstudio.com/docs/setup/windows>downloaded and installed it</a>,
 then immediately added <b>Arduino Community Edition</b> and <b>Vim</b> <a href=https://marketplace.visualstudio.com/VSCode>extensions</a>
 - clicking on those extensions shows a page about <b><i>installing</i></b>, already done.. wtf???
After initial installation, <b>Arduino Community Edition</b> reported itself <i>not activated</i>...??
(... which is never explained ...)
<a href=https://marketplace.visualstudio.com/items?itemName=vscode-arduino.vscode-arduino-community><b>Arduino Community Edition</b> store page</a> is at best misleading.
No <a href=https://github.com/arduino/arduino-cli/releases/>Arduino CLI</a> was bundled with it;  it silently used that already installed by Arduino 2.</a>
When setting <a href=https://blekenbleu.github.io/Arduino/black.htm><code>BlackPill F411CE</code> Board</a>, OUTPUT logged ESP32 installation...??!!

Admittedly, the store page did mention using <code>F1</code>, which I missed/forgot,
but F1 is absolutely essential to running Arduino in VSCode;
-  nearly everything task-oriented requires first pressing <code>F1</code>.
</pre>
<h3>Adding insult to injury</h3>
VSCode editor response to keystrokes is unusably slow.
<h3><a href=https://devrant.com/rants/5333874/my-biggest-problem-with-visual-studio-code-is-that-every-fucking-piece-of-shit-d>not just me</a></h3>
<hr>
</details>

<h3><a href=https://github.com/vscode-arduino/vscode-arduino>VSCode-Arduino</a></h3><dl compact>
<dt>Community maintained version of Visual Studio Code extension for Arduino
<dd>- <a href=https://github.com/arduino/vscode-arduino-tools>corresponding Arduino Tools extension for VS Code</a>

<dt><br><b>So far</b>
<dd>Installed VSCode (about 434MB in <code>F:\VSCode</code> + 309MB in <code>~\.vscode</code>);
<br> added extensions
<br>- Arduino Community Edition
<br>- Vim emulation
<br>- selected BlackPill F411CE
<br>- <code>F1, Arduino: Verify</code> SerialUSB.ino

<p>This builds (<code>F1</code>, then scroll to and select <code>Arduino: Verify</code>)
<br> &emsp; first OUTPUTs:
<pre>[Warning] Output path is not specified.
 Unable to reuse previously compiled files. Build will be slower. See README.</pre><ul>
<li> what <code>Output path</code>?
<li> where to specify?
<li> what <code>README</code>?</ul></dl>

<ul><li>FWIW, found builds in <code>F:\Temp\arduino</code></a>
<li>found configuration crap in <code>/c/Users/bleke/AppData/Roaming/Code</code>.
<li>vscode-arduino stuff is in <br><code>~/.vscode/extensions/vscode-arduino.vscode-arduino-community-0.7.2-win32-x64</code>
<li>That <code>[Warning]</code> may be from <code>arduino-cli</code>
<li><details><summary><code>find . -name '<b>arduino-cli</b>*' -print</code></summary>
<pre>~/.arduinoIDE/arduino-cli.yaml
~/.vscode/extensions/vscode-arduino.vscode-arduino-community-0.7.2-win32-x64/assets/platform/win32-x64/arduino-cli
~/.vscode/extensions/vscode-arduino.vscode-arduino-community-0.7.2-win32-x64/assets/platform/win32-x64/arduino-cli/arduino-cli.exe
~/AppData/Local/Arduino15/packages/STMicroelectronics/hardware/stm32/2.11.0/CI/build/arduino-cli.py</pre>
<li>I find no Python installed...<br><br>

<li><code>arduino-cli.exe  Version: 0.31.0</code> is installed;&nbsp; <code>1.3.0</code> is available,
<br>but does not by default find <code>~/.arduinoIDE/arduino-cli.yaml</code>;
<li>bundled <code>arduino-cli</code> does not support:<pre>build_cache:
    path: f:/Temp/arduino</pre>
<li>My default shell is <code>msys64 bash</code>;  added to <code>.bash_profile</code>:
<pre># 19 Aug 2025 arduino-cli
if [ -r "${USERPROFILE}/.arduinoIDE/arduino-cli.yaml" ]; then
    export ARDUINO_CONFIG_FILE="${USERPROFILE}/.arduinoIDE/arduino-cli.yaml"
fi
if [ -d "/d/my/arduino-cli_1.3" ]; then
    PATH="${PATH}:/d/my/arduino-cli_1.3"
    alias arduino-cli="/d/my/arduino-cli_1.3/arduino-cli.exe"
fi</pre>...yielding:<pre>bleke@Antec UCRT64 ~
$ arduino-cli version
arduino-cli  Version: 1.3.0 Commit: 3eecf201 Date: 2025-08-11T08:40:48Z

bleke@Antec UCRT64 ~
$ arduino-cli config dump
board_manager:
    additional_urls:
        - https://github.com/stm32duino/BoardManagerFiles/raw/main/package_stmicroelectronics_index.json
build_cache:
    path: f:/Temp/arduino
directories:
    builtin:
        libraries: C:\Users\bleke\AppData\Local\Arduino15\libraries
    data: c:\Users\bleke\AppData\Local\Arduino15
    user: c:\Users\bleke\Documents\Arduino
locale: en</pre></details>

</ul>

<b>Consequently, must set <code>arduino.json "output"</code> uniquely <a href=https://arduino.stackexchange.com/a/45360>for each sketch</a></b>
<details><summary>e.g.:&nbsp; <code>$ cat .vscode/arduino.json</code></summary>
<pre>{
    "configuration": "pnum=BLACKPILL_F411CE,upload_method=swdMethod,xserial=generic,usb=none,xusb=FS,opt=osstd,dbg=none,rtlib=nano",
    "board": "STMicroelectronics:stm32:GenF4",
    "sketch": "SerialUSB.ino",
    <font color=red>"output": "f:/Temp/arduino/sketches/SerialUSB"</font>
}</pre></details>

<dl>
<dt><br><b>STM32 Upload method</b> is set in <code>Arduino Board Configuration</code>;
<dd>NOT <code>Arduino: Select Programmer</code>
<br>... <a href=programming.htm>but <b>Upload is broken</b></a>

<dt><br>Documentation
<dd><a href=https://marketplace.visualstudio.com/items?itemName=vscode-arduino.vscode-arduino-community>VS Marketplace</a>
&nbsp; &lt;- <b><i>this wants careful reading (and rereading)</i></b>
<br><a href=https://github.com/arduino/arduino-cli>arduino-cli</a> &emsp; &emsp; <i>GitHub</i>
<br><a href=https://deepwiki.com/vscode-arduino/vscode-arduino>DeepWiki</a>;
<br><a href=https://dev.to/udara_dananjaya/how-to-set-up-arduino-development-with-vscode-and-arduino-cli-3382>DEV</a>
<br><a href=https://www.circuitstate.com/tutorials/how-to-use-vs-code-for-creating-and-uploading-arduino-sketches/>CIRCUITSTATE</a>

<p><a href=https://stm32world.com/wiki/STM32_development_and_debugging_using_VSCode>ST has a non-Arduino VSCode plugin</a></p>
</dl>

</td></tr><tr><td align=center>
maintained by <a href="https://github.com/blekenbleu">blekenbleu</a><br>
</td></tr></table></div> 
</body></html>
